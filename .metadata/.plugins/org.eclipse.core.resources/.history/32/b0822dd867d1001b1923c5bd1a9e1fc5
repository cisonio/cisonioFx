package cl.inacap.cisonioApp.model.repository;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.support.JpaRepositoryFactory;
import org.springframework.data.repository.core.support.RepositoryFactorySupport;

import cl.inacap.cisonioApp.model.dto.productos.Categoria;

/*
 * 
 * */
public class RepositoryFactory {
	private EntityManagerFactory emf = Persistence.createEntityManagerFactory("cisonioModel");
	private EntityManager em = emf.createEntityManager();
	public RepositoryFactorySupport factory = new JpaRepositoryFactory(em);
	//then is called RepositoryFactory.factory().getRepository(CategoriaRepository.class)
	public AbastecimientoRepository getAbasDAO() {
		AbastecimientoRepository abasDAO = factory.getRepository(AbastecimientoRepository.class);
		return abasDAO;
	}
	
	public <T extends JpaRepository<M,Integer>,M> T getDAO(Class<T> claseRepositorio) {
		T repositorio = factory.getRepository(claseRepositorio);
		return repositorio;
	}
}

